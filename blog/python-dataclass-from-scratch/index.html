<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.117.0"><title>Python Dataclass From Scratch | Jordi Smit</title><meta name=description content="Want to understand the magic behind data classes? Learn how to create them from scratch using Python's exec function."><meta name=keywords content="python,code generation"><link rel=canonical href=https://jordismit.com/blog/python-dataclass-from-scratch/><meta property="og:type" content="website"><meta property="og:title" content="Python Dataclass From Scratch | Jordi Smit"><meta property="og:description" content="Want to understand the magic behind data classes? Learn how to create them from scratch using Python's exec function."><meta property="og:site_name" content="Jordi Smit"><meta property="og:url" content="https://jordismit.com/blog/python-dataclass-from-scratch/"><meta property="og:locale" content="en"><meta property="og:image" content="https://jordismit.com/blog/python-dataclass-from-scratch/images/cover.png"><meta property="og:image:secure_url" content="https://jordismit.com/blog/python-dataclass-from-scratch/images/cover.png"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python Dataclass From Scratch"><meta name=twitter:description content="Want to understand the magic behind data classes? Learn how to create them from scratch using Python's exec function."><link rel=stylesheet href=https://jordismit.com/css/bootstrap.min.7633b7c0c97d19e682feee8afa2738523fcb2a14544a550572caeecd2eefe66b.css integrity="sha256-djO3wMl9GeaC/u6K+ic4Uj/LKhRUSlUFcsruzS7v5ms="><link rel=stylesheet href=https://jordismit.com/css/goolge-fonts.min.59f98c25da594b2a690835ae556add4bd6b87b555c2be822e4f8d7ed2ac28c55.css integrity="sha256-WfmMJdpZSyppCDWuVWrdS9a4e1VcK+gi5PjX7SrCjFU="><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.0.13/css/all.css integrity=sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp crossorigin=anonymous><link rel=stylesheet href=https://jordismit.com/css/medium.min.edbfa243cc780784f7bc1e894ffbbe0f61381ecc59ea59a8e9736b0adbf727c0.css integrity="sha256-7b+iQ8x4B4T3vB6JT/u+D2E4HsxZ6lmo6XNrCtv3J8A="><link rel=stylesheet href=https://jordismit.com/css/additional.min.df77e97a7aaac1ae6e2eb40724704e1fe7702fe8e085c5bc4b21c2b013c90307.css integrity="sha256-33fpenqqwa5uLrQHJHBOH+dwL+jghcW8SyHCsBPJAwc="><link rel=icon type=image/x-icon href=https://jordismit.com/favicon/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=https://jordismit.com/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://jordismit.com/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://jordismit.com/favicon/favicon-16x16.png><meta name=theme-color content="#fff"><script async src="https://www.googletagmanager.com/gtag/js?id=G-YZP2SLQQK7"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YZP2SLQQK7",{anonymize_ip:!1})}</script></head><body class="d-flex flex-column min-vh-100"><nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down"><div class="container pr-0"><a class=navbar-brand href=https://jordismit.com/><span style=font-family:Righteous>Jordi Smit</span></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarMediumish aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarMediumish><ul class="navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/blog>Blog</a></li><li class=nav-item><a class=nav-link href=/til>TIL</a></li><li class=nav-item><a class=nav-link href=/cheat-sheets>Cheat-sheets</a></li><li class=nav-item><a class=nav-link href=/about>About Me</a></li></ul></div></div></nav><div class=site-content><div class=container><div class=main-content><div class=container><div class=row><div class="col-md-2 pl-0"><div class="share sticky-top sticky-top-offset"><p>Share</p><ul><li class="ml-1 mr-1"><a target=_blank href="https://twitter.com/intent/tweet?text=Python%20Dataclass%20From%20Scratch&url=https%3a%2f%2fjordismit.com%2fblog%2fpython-dataclass-from-scratch%2f" onclick='return window.open(this.href,"twitter-share","width=550,height=435"),!1'><i class="fab fa-twitter"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://facebook.com/sharer.php?u=https%3a%2f%2fjordismit.com%2fblog%2fpython-dataclass-from-scratch%2f" onclick='return window.open(this.href,"facebook-share","width=550,height=435"),!1'><i class="fab fa-facebook-f"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2fjordismit.com%2fblog%2fpython-dataclass-from-scratch%2f" onclick='return window.open(this.href,"linkedin-share","width=550,height=435"),!1'><i class="fab fa-linkedin"></i></a></li></ul></div></div><div class="col-md-9 flex-first flex-md-unordered"><div class=mainheading><div class="row post-top-meta"><div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0 md-nopad-right"><a href=/about><img class=author-thumb src=https://jordismit.com/media/images/author_hu25d333fcded103db2f52f7476cb1420a_204682_250x0_resize_q75_box.jpg alt=Author></a></div><div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-start md-nopad-left"><a href=/about class=link-dark>Jordi
Smit</a><br><span class=author-description>Machine Learning Engineer<br>6 Nov 2022
<i class="far fa-clock clock"></i>
6 min read</span></div></div><h1 class=posttitle>Python Dataclass From Scratch</h1></div><div class=post-featured-image><img class=img-fluid src=https://jordismit.com/blog/python-dataclass-from-scratch/images/cover.png alt="thumbnail for this post"></div><div class=article-post><p>Python&rsquo;s <a href=https://docs.python.org/3/library/dataclasses.html>data class</a> functionality has become very popular over the last few years.
Simply adding the <code>@dataclasses.dataclass</code> decorator on top of your class generates a <code>__init__</code> function, <code>__repr__</code> function, etc.
This is extremely convenient since it removes a lot of boilerplate code.
I have been using data classes for years and often tell people about them.
However, recently I showed it to someone new to Python, and they asked how this works under the hood.
To be honest, at that moment, I also had no idea, but I decided to find out by implementing a data class from scratch.</p><h2 id=pythons-exec-function>Python&rsquo;s exec function</h2><p>After doing some research, I discovered Python has the <a href=https://docs.python.org/3/library/functions.html#exec>exec</a> function.
This function takes a string with valid python code as input and compiles it into runnable python code at runtime.
For example, we can do the following using the <code>exec</code> function:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>code <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>def hello_world():
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    print(&#34;hello world&#34;)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>scope <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>exec(code, globals<span style=color:#f92672>=</span>scope)
</span></span><span style=display:flex><span>scope[<span style=color:#e6db74>&#34;hello_world&#34;</span>]()
</span></span></code></pre></div><p>In this example, we write the <code>hello_world</code> function in a string.
We then give this string and a scope dictionary as input to the <code>exec</code> function.
The <code>exec</code> function then executes the python code in the string.
The string defines a new function in this example, which will be stored in the <code>scope</code> variable.
Now, we can call the <code>hello_world</code> function as we see fit.
The cool thing about this is that the provided string can be dynamically generated and changed as long as it contains valid Python code.
Thus this feature can enable us to do incredible things that might not be possible in other languages. However, with this great power also comes great responsibility. (Thanks, Uncle Ben). Whenever you use the <code>exec</code> function, be aware that this might enable someone to run arbitrary code. So always be very careful with this and think about the potential security implementation of this.
Anyway, let&rsquo;s keep this in mind why we will use the <code>exec</code> function to implement our version of a data class.</p><h2 id=generating-a-init-function>Generating a init function</h2><p>Before we implement our custom <code>generate_init</code> function, let&rsquo;s first look at the behavior of <code>dataclasses.dataclass</code>.
When we define a dataclass using <code>@dataclasses.dataclass</code> it generates the following <code>__init__</code> function:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Our example data class</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Point</span>:
</span></span><span style=display:flex><span>    x: int
</span></span><span style=display:flex><span>    y: int
</span></span><span style=display:flex><span>    z: float <span style=color:#f92672>=</span> <span style=color:#ae81ff>2.0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># The desired generated init function</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>def __init__(self, x: int, y: int, z: float = 2.0) -&gt; None:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    self.x = x
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    self.y = y
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    self.z = z
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;</span>
</span></span></code></pre></div><p>So to generate this init function, we first need to know the names of the class properties and their type hint.
Luckily we can access this using the <code>__annotations__</code> magic property.
In the above example <code>Point._annotations__</code> returns <code>{'x': &lt;class 'int'>, 'y': &lt;class 'int'>, 'z': &lt;class 'float'>}</code>.
The only thing we still need is a way to detect whether a property should have a default value.
In the above example, <code>z</code> receives the default value <code>2.0</code> because the class property <code>z</code> has this value.
So, to implement this functionality, we need a way to get the value of a class property if it exists.
We can do this using the <a href=https://docs.python.org/3/library/functions.html#hasattr>hasattr</a> and <a href=https://docs.python.org/3/library/functions.html#getattr>getattr</a> functions.
In the above example this give <code>hasattr(Point, "z")</code> returns <code>True</code> and <code>getattr(Point, "z")</code> return <code>2.0</code> since <code>z</code> has been assigned the value <code>2.0</code>, while <code>hasattr(Point, "x")</code> returns <code>False</code> since <code>x</code> has not been assigned a value.
So with these functions, we should have all the required information to dynamically generate a <code>__init__</code> function in a string using the following functions:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> typing <span style=color:#f92672>import</span> Type
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>generate_init</span>(cls: Type) <span style=color:#f92672>-&gt;</span> str:
</span></span><span style=display:flex><span>    code <span style=color:#f92672>=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;def __init__(self,</span><span style=color:#e6db74>{</span>generate_init_inputs(cls)<span style=color:#e6db74>}</span><span style=color:#e6db74>) -&gt; None:</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> name, annotation <span style=color:#f92672>in</span> cls<span style=color:#f92672>.</span>__annotations__<span style=color:#f92672>.</span>items():
</span></span><span style=display:flex><span>        code <span style=color:#f92672>+=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;    self.</span><span style=color:#e6db74>{</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74> = </span><span style=color:#e6db74>{</span>name<span style=color:#e6db74>}</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> code
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>generate_init_inputs</span>(cls: Type) <span style=color:#f92672>-&gt;</span> str:
</span></span><span style=display:flex><span>    input_vars <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> name, annotation <span style=color:#f92672>in</span> cls<span style=color:#f92672>.</span>__annotations__<span style=color:#f92672>.</span>items():
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> hasattr(cls, name):
</span></span><span style=display:flex><span>            input_vars<span style=color:#f92672>.</span>append(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>: </span><span style=color:#e6db74>{</span>annotation<span style=color:#f92672>.</span>__name__<span style=color:#e6db74>}</span><span style=color:#e6db74>=</span><span style=color:#e6db74>{</span>getattr(cls, name)<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            input_vars<span style=color:#f92672>.</span>append(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>: </span><span style=color:#e6db74>{</span>annotation<span style=color:#f92672>.</span>__name__<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;,&#34;</span><span style=color:#f92672>.</span>join(input_vars)
</span></span></code></pre></div><p>We can now generate an <code>__init__</code> function based on the type hint and class properties.
However, how do we tell Python that this <code>__init__</code> function belongs to this specific class?
An amazing feature of Python is that you can overwrite any class method at any time, including after the creation of the class, using the <code>setattr</code> function.
So, we can add the <code>__init__</code> method to our <code>Point</code> class as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># create the init function</span>
</span></span><span style=display:flex><span>init_code_as_string <span style=color:#f92672>=</span> generate_init(Point)
</span></span><span style=display:flex><span>scope <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>exec(init_code_as_string, globals<span style=color:#f92672>=</span>scope)
</span></span><span style=display:flex><span><span style=color:#75715e># assign the __init__ function</span>
</span></span><span style=display:flex><span>setattr(Point, <span style=color:#e6db74>&#34;__init__&#34;</span>, scope[<span style=color:#e6db74>&#34;__init__&#34;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># now this is possible</span>
</span></span><span style=display:flex><span>p1 <span style=color:#f92672>=</span> Point(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>p2 <span style=color:#f92672>=</span> Point(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>)
</span></span></code></pre></div><h2 id=generating-a-repr-function>Generating a repr function</h2><p>Another thing <code>dataclasses.dataclass</code> does is that it generates a <code>__repr__</code> function.
This function ensures that if your print your data class, the output looks exactly as if you were creating a new instance of your data class.
So if we want to generate such as function, we need the following:</p><ol><li>We need to know the input order of the arguments in the <code>__init__</code> function.</li><li>We need to know the attribute names.</li></ol><p>Getting this information sounds simple because we were the ones that constructed the <code>__init__</code> function using our <code>generate_init</code> function.
However, this assumption might not hold in the real world since someone could decide to implement the <code>__init__</code> function themselves.
In that case, you could do something <a href=https://docs.python.org/3/library/inspect.html#inspect.getfullargspec>inspect.getfullargspec</a> or <a href=https://docs.python.org/3/library/functions.html#hasattr>hasattr</a> but this will make our code much more complicated.
So for now, let&rsquo;s consider that out of scope, and let&rsquo;s assume that we are the one that constructs the <code>__init__</code> function using our <code>generate_init</code>.
In this situation, we could implement the <code>generate_repr</code> function as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> typing <span style=color:#f92672>import</span> Type
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>generate_repr</span>(cls: Type) <span style=color:#f92672>-&gt;</span> str:
</span></span><span style=display:flex><span>    values <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;, &#34;</span><span style=color:#f92672>.</span>join([<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>=</span><span style=color:#ae81ff>{{</span><span style=color:#e6db74>self.</span><span style=color:#e6db74>{</span>name<span style=color:#e6db74>}</span><span style=color:#ae81ff>}}</span><span style=color:#e6db74>&#34;</span> <span style=color:#66d9ef>for</span> name <span style=color:#f92672>in</span> cls<span style=color:#f92672>.</span>__annotations__])
</span></span><span style=display:flex><span>    code <span style=color:#f92672>=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>def __repr__(self) -&gt; str:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    return f&#34;</span><span style=color:#e6db74>{</span>cls<span style=color:#f92672>.</span>__name__<span style=color:#e6db74>}</span><span style=color:#e6db74>(</span><span style=color:#e6db74>{</span>values<span style=color:#e6db74>}</span><span style=color:#e6db74>)&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> code
</span></span></code></pre></div><h2 id=putting-it-all-together>Putting it all together</h2><p>The last thing we need to do is to make our new data class functionality easy to use.
We can do this by creating a decorator function that dynamically adds the <code>__init__</code> and <code>__repr__</code> to a class definition.
In Python, you can create a class decorator by creating a function that takes as input a class type and return a (new) class type.
We can implement this as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> typing <span style=color:#f92672>import</span> Any, Type, TypeVar
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>T <span style=color:#f92672>=</span> TypeVar(<span style=color:#e6db74>&#34;T&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>dataclass</span>(cls: Type[T]) <span style=color:#f92672>-&gt;</span> Type[T]:
</span></span><span style=display:flex><span>    <span style=color:#75715e># add init function</span>
</span></span><span style=display:flex><span>    init_code <span style=color:#f92672>=</span> generate_init(cls)
</span></span><span style=display:flex><span>    d: dict[str, Any] <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>    exec(init_code, d)
</span></span><span style=display:flex><span>    setattr(cls, <span style=color:#e6db74>&#34;__init__&#34;</span>, d[<span style=color:#e6db74>&#34;__init__&#34;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># add repr function</span>
</span></span><span style=display:flex><span>    d: dict[str, Any] <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>    repr_code <span style=color:#f92672>=</span> generate_repr(cls)
</span></span><span style=display:flex><span>    exec(repr_code, d)
</span></span><span style=display:flex><span>    setattr(cls, <span style=color:#e6db74>&#34;__repr__&#34;</span>, d[<span style=color:#e6db74>&#34;__repr__&#34;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> cls
</span></span></code></pre></div><p>Now we have a minimal working implementation of a dataclass. We can use it is follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a6e22e>@dataclass</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Point</span>:
</span></span><span style=display:flex><span>x: int
</span></span><span style=display:flex><span>y: int <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>z: int <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(Point(<span style=color:#ae81ff>1</span>, y<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>)) <span style=color:#75715e># &gt;&gt;&gt; Point(x=1, y=2, z=3)</span>
</span></span><span style=display:flex><span>print(Point(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>)) <span style=color:#75715e># &gt;&gt;&gt; Point(x=1, y=1, z=1)</span>
</span></span></code></pre></div><h2 id=final-thoughts>Final thoughts</h2><p>Implementing a data class from scratch was a fun experience, which opened my eyes to the power of dynamic code generation in Python.
This was one example of what you can do with dynamic code generation, but you can take it much further.
For example, the <a href=https://docs.python.org/3/library/dataclasses.html>dataclass</a> can optionally implement much more functionality such as <code>__eq__</code>, <code>__hash__</code>, <code>__lt__</code>, and more.
Adding this functionality could also be a fun challenge.
Another option could be to add type validation logic based on the <code>__annotations__</code>, which would produce functionality similar to that of <a href=https://pydantic-docs.helpmanual.io/>Pydantic</a>.
And yet another option could be the <a href=https://fastapi.tiangolo.com/>FastAPI</a> route whereby you use <code>__annotations__</code> as additional information for your framework functions.</p></div><div class=after-post-tags><ul class=tags><li><a href=/tags/python>python</a></li><li><a href=/tags/code-generation>code generation</a></li></ul></div><div class="row PageNavigation d-flex justify-content-between font-weight-bold"><a class="d-block col-md-6" href=https://jordismit.com/blog/diy-auto-grad-engine-a-step-by-step-guide-to-calculating-derivatives-automatically/>&#171; DIY auto-grad Engine: A Step-by-Step Guide to Calculating Derivatives Automatically</a>
<a class="d-block col-md-6 text-lg-right" href=https://jordismit.com/blog/how-to-call-a-shell-script-using-a-custom-keyboard-shortcut-in-macos/>How to call a shell script using a custom keyboard shortcut in MacOS &#187;</a><div class=clearfix></div></div></div></div></div></div></div></div><footer class="footer mt-auto"><div class=container><div class=row><div class="col-md-12 col-sm-612 text-center">&copy; Copyright
Jordi Smit - All rights reserved</div></div></div></footer><script async src=https://jordismit.com/js/mediumish.min.904f73957dbda00e4302fc45bef61087115c59c3a16a7a68df2ad3161dd9e58a.js integrity="sha256-kE9zlX29oA5DAvxFvvYQhxFcWcOhanpo3yrTFh3Z5Yo="></script></body></html>