<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.111.2"><title>Poetry | J0rd1Smit</title><meta name=twitter:card content="summary"><meta name=twitter:title content="Poetry"><meta name=twitter:description content="Poetry is an awsome dependency management and virtual environment management tool for Python. I use it quite often in my day-to-day work."><meta property="og:title" content="Poetry"><meta property="og:description" content="Poetry is an awsome dependency management and virtual environment management tool for Python. I use it quite often in my day-to-day work."><meta property="og:type" content="article"><meta property="og:url" content="https://j0rd1smit.github.io/cheat-sheets/poetry/"><meta property="article:section" content="cheat-sheets"><meta property="article:published_time" content="2022-07-27T20:05:21+02:00"><meta property="article:modified_time" content="2022-07-27T20:05:21+02:00"><link rel=stylesheet href=https://j0rd1smit.github.io/css/bootstrap.min.60b19e5da6a9234ff9220668a5ec1125c157a268513256188ee80f2d2c8d8d36.css integrity="sha256-YLGeXaapI0/5IgZopewRJcFXomhRMlYYjugPLSyNjTY="><link rel=stylesheet href=https://j0rd1smit.github.io/css/goolge-fonts.b251d02039bb76d3217f1bec88330f4bc1721d311854924a7217dcffe5bc80cb.css integrity="sha256-slHQIDm7dtMhfxvsiDMPS8FyHTEYVJJKchfc/+W8gMs="><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.0.13/css/all.css integrity=sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp crossorigin=anonymous><link rel=stylesheet href=https://j0rd1smit.github.io/css/medium.34da69acb5cb8e4275b44045c1ffd31648ac0f9f119c63ca72a121216a1be4c5.css integrity="sha256-NNpprLXLjkJ1tEBFwf/TFkisD58RnGPKcqEhIWob5MU="><link rel=stylesheet href=https://j0rd1smit.github.io/css/additional.4ef3d39c77b4a1adf1b5b6998bc22aa9fe2465cbbfbfdc12c2b7aa07dc13dd9d.css integrity="sha256-TvPTnHe0oa3xtbaZi8Iqqf4kZcu/v9wSwreqB9wT3Z0="></head><body class="d-flex flex-column min-vh-100"><nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down"><div class="container pr-0"><a class=navbar-brand href=https://j0rd1smit.github.io/><span style=font-family:Righteous>J0rd1Smit</span></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarMediumish aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarMediumish><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/blog>Blog</a></li><li class=nav-item><a class=nav-link href=/til>TIL</a></li><li class=nav-item><a class=nav-link href=/cheat-sheets>Cheat-sheets</a></li><li class=nav-item><a class=nav-link href=/about>About Me</a></li></ul></div></div></nav><div class=site-content><div class=container><div class=main-content><div class=container><div class=row><div class="col-md-2 pl-0"><div class="share sticky-top sticky-top-offset"><p>Share</p><ul><li class="ml-1 mr-1"><a target=_blank href="https://twitter.com/intent/tweet?text=Poetry&url=https%3a%2f%2fj0rd1smit.github.io%2fcheat-sheets%2fpoetry%2f" onclick='return window.open(this.href,"twitter-share","width=550,height=435"),!1'><i class="fab fa-twitter"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://facebook.com/sharer.php?u=https%3a%2f%2fj0rd1smit.github.io%2fcheat-sheets%2fpoetry%2f" onclick='return window.open(this.href,"facebook-share","width=550,height=435"),!1'><i class="fab fa-facebook-f"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2fj0rd1smit.github.io%2fcheat-sheets%2fpoetry%2f" onclick='return window.open(this.href,"linkedin-share","width=550,height=435"),!1'><i class="fab fa-linkedin"></i></a></li></ul></div></div><div class="col-md-9 flex-first flex-md-unordered"><div class=mainheading><div class="row post-top-meta"><div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0 md-nopad-right"><a href=/about><img class=author-thumb src=https://j0rd1smit.github.io/media/images/author_hu25d333fcded103db2f52f7476cb1420a_204682_250x0_resize_q75_box.jpg alt=Author></a></div><div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left md-nopad-left"><a href=/about class=link-dark>Jordi
Smit</a><br><span class=author-description>Machine Learning Engineer<br>Jul 27, 2022
<i class="far fa-clock clock"></i>
3 min read</span></div></div><h1 class=posttitle>Poetry</h1></div><div class=article-post><p><a href=https://python-poetry.org/>Poetry</a> is an awsome dependency management and virtual environment management tool for Python.
I use it quite often in my day-to-day work.
If you are a PIP or Conda user, you might find that Poetry&rsquo;s CLI is slightly different from what you are used to.
So to help you get started I created overview of the command I use most often.</p><h2 id=project-creation>Project creation</h2><table class="table table-striped table-bordered"><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>poetry new my-package</code></td><td>This creates a new project. This new project will contain a new <code>pyproject.toml</code> and <code>readme.md</code> files. It also sets up the folder structure for your Python package and your unit tests.</td></tr><tr><td><code>poetry new --src my-package</code></td><td>This also creates a new project but with the <code>src</code> project layout.</td></tr><tr><td><code>poetry init</code></td><td>This creates a new <code>pyproject.toml</code> file without creating an entire folder structure.</td></tr></tbody></table><h2 id=dependancy-management>Dependancy management</h2><table class="table table-striped table-bordered"><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>poetry install</code></td><td>This installs <strong>all</strong> the dependencies that are specified in the <code>poetry.lock</code> file. Thus, if you change your <code>pyproject.toml</code> but you do <strong>not</strong> update your <code>poetry.lock</code> file it will install the dependencies as specified in the (outdated) <code>poetry.lock</code> file. If there is no <code>poetry.lock</code> file, it will automatically first run the <code>poetry lock</code> command to create a <code>poetry.lock</code> file.</td></tr><tr><td><code>poetry install --no-dev</code></td><td>This only installs the main dependencies and does not install the development dependencies. Your dev dependencies are dependencies that you don&rsquo;t need to run the application such as <code>pytest</code>, <code>mypy</code>, etc. So, if you don&rsquo;t install them your final application will take up less space.</td></tr><tr><td><code>poetry install --remove-untracked</code></td><td>Removes all dependencies that are installed in your venv but are no longer specified in your <code>poetry.lock</code> file.</td></tr><tr><td><code>poetry install --extras "NAME_1 NAME_N</code></td><td>This installs the optional dependencies <code>NAME_1</code> and <code>NAME_N</code>.</td></tr><tr><td><code>poetry install --no-root</code></td><td>This installs your projects dependencies but doesn&rsquo;t install your package to the global name space in the venv. Thus, you can no longer directly import the package you made.</td></tr><tr><td><code>poetry update</code></td><td>Update <strong>all</strong> the dependencies in the <code>poetry.lock</code> file to their latest version.</td></tr><tr><td><code>poetry update NAME_1 NAME_2</code></td><td>Updates <strong>only</strong> <code>NAME_1</code> and <code>NAME_N</code> in the <code>poetry.lock</code> file to their latest version.</td></tr><tr><td><code>poetry add NAME_1 NAME_2</code></td><td>Adds <code>NAME_1</code> and <code>NAME_N</code> to the <code>poetry.lock</code> file and installs them into the venv. You can also add constrains like <code>@^2.0.5</code>, <code>>=2.0.5</code> or <code>&lt;=2.0.5</code>.</td></tr><tr><td><code>poetry add ../path/to/other/folder/with/pyproject.toml</code></td><td>Adds another poetry project as a <strong>local</strong> dependency. This is quite usefull for mono-repos.</td></tr><tr><td><code>poety remove NAME_1 NAME_2</code></td><td>Uninstalls dependency <code>NAME_1</code> and <code>NAME_N</code> from the VENV. Also removes them from the <code>poetry.lock</code> file.</td></tr><tr><td><code>poetry lock</code></td><td>If you have updated the dependencies in the <code>pyproject.toml</code> file manually, you can use this command to update the <code>poetry.lock</code> file.</td></tr><tr><td><code>poetry export -f requirements.txt --output requirements.txt</code></td><td>Export the lock file in the traditional <code>requirements.txt</code> file format.</td></tr></tbody></table><h2 id=virtual-environment>Virtual environment</h2><table class="table table-striped table-bordered"><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>poetry run CMD</code></td><td>Run a command inside the virtual environment without activating the VENV. For example, CMD can be <code>python main.py</code>, <code>black</code>, <code>pytest</code>, etc.</td></tr><tr><td><code>poetry shell</code></td><td>Activates the virtual environment. Similar to <code>conda activate name</code> or <code>source venv/bin/activate</code>.</td></tr><tr><td><code>poetry env use path/to/pythonN</code></td><td>Tell poetry to use the python version at <code>path/to/pythonN</code> as a basis for the VENV. You need this if you want to use a specific python version for VENV, e.g. <code>py3.9</code> or <code>py3.10</code>.</td></tr><tr><td><code>poetry env info --path</code></td><td>This gives the absolute path to the virtual environment. Useful if your IDEA needs a path to your python interpreter.</td></tr><tr><td><code>poetry env remove /full/path/to/python</code></td><td>This deletes the virtual environment.</td></tr><tr><td><code>poetry config virtualenvs.in-project true</code></td><td>Tell poetry to save the VENV dir in the same directory as the <code>pyproject.toml</code>.</td></tr></tbody></table><p>For a more complete overview I recommend you to read the <a href=https://python-poetry.org/docs/cli/>Poetry documentation</a>.</p></div><div class=after-post-tags><ul class=tags></ul></div><div class="row PageNavigation d-flex justify-content-between font-weight-bold"><div class=clearfix></div></div></div></div></div></div></div></div><footer class="footer mt-auto"><div class=container><div class=row><div class="col-md-12 col-sm-612 text-center">&copy; Copyright
Jordi Smit - All rights reserved</div></div></div></footer><script src=https://j0rd1smit.github.io/js/jquery-3.6.1.min.131c0d82967fed05e1920e519e0ea6ec91ab97b7c40480f72f8af8680bba1f0a.js integrity="sha256-ExwNgpZ/7QXhkg5Rng6m7JGrl7fEBID3L4r4aAu6Hwo="></script>
<script src=https://j0rd1smit.github.io/js/popper.min.549cf842cba3739e48efdb4fb6c06405d0e14a02e274538dcd9eed23f49b9e98.js integrity="sha256-VJz4Qsujc55I79tPtsBkBdDhSgLidFONzZ7tI/Sbnpg="></script>
<script src=https://j0rd1smit.github.io/js/bootstrap.min.0a34a87842c539c1f4feec56bba982fd596b73500046a6e6fe38a22260c6577b.js integrity="sha256-CjSoeELFOcH0/uxWu6mC/Vlrc1AARqbm/jiiImDGV3s="></script>
<script src=https://j0rd1smit.github.io/js/mediumish.d6fc184863fad23419eee1ce39d87152fb7f8a1c2444f5da3d16b5efa375e389.js integrity="sha256-1vwYSGP60jQZ7uHOOdhxUvt/ihwkRPXaPRa176N144k="></script></body></html>