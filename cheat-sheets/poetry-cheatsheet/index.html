<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.111.3"><title>Poetry cheatsheet | Jordi Smit</title><meta name=description content="Keep forgetting the CLI commands for Poetry? This cheatsheet will help you."><meta name=keywords content="poetry,python,dependency management,virtual environment,CLI"><link rel=canonical href=https://jordismit.com/cheat-sheets/poetry-cheatsheet/><meta property="og:type" content="website"><meta property="og:title" content="Poetry cheatsheet | Jordi Smit"><meta property="og:description" content="Keep forgetting the CLI commands for Poetry? This cheatsheet will help you."><meta property="og:site_name" content="Jordi Smit"><meta property="og:url" content="https://jordismit.com/cheat-sheets/poetry-cheatsheet/"><meta property="og:locale" content="en"><meta property="og:image" content="https://jordismit.com/cheat-sheets/poetry-cheatsheet/images/cover.jpg"><meta property="og:image:secure_url" content="https://jordismit.com/cheat-sheets/poetry-cheatsheet/images/cover.jpg"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Poetry cheatsheet"><meta name=twitter:description content="Keep forgetting the CLI commands for Poetry? This cheatsheet will help you."><link rel=stylesheet href=https://jordismit.com/css/bootstrap.min.60b19e5da6a9234ff9220668a5ec1125c157a268513256188ee80f2d2c8d8d36.css integrity="sha256-YLGeXaapI0/5IgZopewRJcFXomhRMlYYjugPLSyNjTY="><link rel=stylesheet href=https://jordismit.com/css/goolge-fonts.min.59f98c25da594b2a690835ae556add4bd6b87b555c2be822e4f8d7ed2ac28c55.css integrity="sha256-WfmMJdpZSyppCDWuVWrdS9a4e1VcK+gi5PjX7SrCjFU="><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.0.13/css/all.css integrity=sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp crossorigin=anonymous><link rel=stylesheet href=https://jordismit.com/css/medium.min.e66d0e4ae688e3a5810c787217a0415a08000e0855cdfdd538f874f3b5a3273f.css integrity="sha256-5m0OSuaI46WBDHhyF6BBWggADghVzf3VOPh087WjJz8="><link rel=stylesheet href=https://jordismit.com/css/additional.min.6433b788855d51fa0f5e002802a058159ae5587327593e4d9922d98725923ead.css integrity="sha256-ZDO3iIVdUfoPXgAoAqBYFZrlWHMnWT5NmSLZhyWSPq0="><link rel=icon type=image/x-icon href=https://jordismit.com/favicon/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=https://jordismit.com/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://jordismit.com/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://jordismit.com/favicon/favicon-16x16.png><meta name=theme-color content="#fff"></head><body class="d-flex flex-column min-vh-100"><nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down"><div class="container pr-0"><a class=navbar-brand href=https://jordismit.com/><span style=font-family:Righteous>Jordi Smit</span></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarMediumish aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarMediumish><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/blog>Blog</a></li><li class=nav-item><a class=nav-link href=/til>TIL</a></li><li class=nav-item><a class=nav-link href=/cheat-sheets>Cheat-sheets</a></li><li class=nav-item><a class=nav-link href=/about>About Me</a></li></ul></div></div></nav><div class=site-content><div class=container><div class=main-content><div class=container><div class=row><div class="col-md-2 pl-0"><div class="share sticky-top sticky-top-offset"><p>Share</p><ul><li class="ml-1 mr-1"><a target=_blank href="https://twitter.com/intent/tweet?text=Poetry%20cheatsheet&url=https%3a%2f%2fjordismit.com%2fcheat-sheets%2fpoetry-cheatsheet%2f" onclick='return window.open(this.href,"twitter-share","width=550,height=435"),!1'><i class="fab fa-twitter"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://facebook.com/sharer.php?u=https%3a%2f%2fjordismit.com%2fcheat-sheets%2fpoetry-cheatsheet%2f" onclick='return window.open(this.href,"facebook-share","width=550,height=435"),!1'><i class="fab fa-facebook-f"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2fjordismit.com%2fcheat-sheets%2fpoetry-cheatsheet%2f" onclick='return window.open(this.href,"linkedin-share","width=550,height=435"),!1'><i class="fab fa-linkedin"></i></a></li></ul></div></div><div class="col-md-9 flex-first flex-md-unordered"><div class=mainheading><div class="row post-top-meta"><div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0 md-nopad-right"><a href=/about><img class=author-thumb src=https://jordismit.com/media/images/author_hu25d333fcded103db2f52f7476cb1420a_204682_250x0_resize_q75_box.jpg alt=Author></a></div><div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left md-nopad-left"><a href=/about class=link-dark>Jordi
Smit</a><br><span class=author-description>Machine Learning Engineer<br>Jul 27, 2022
<i class="far fa-clock clock"></i>
3 min read</span></div></div><h1 class=posttitle>Poetry cheatsheet</h1></div><div class=article-post><p><a href=https://python-poetry.org/>Poetry</a> is an awsome dependency management and virtual environment management tool for Python.
I use it quite often in my day-to-day work.
If you are a PIP or Conda user, you might find that Poetry&rsquo;s CLI is slightly different from what you are used to.
So to help you get started I created overview of the command I use most often.</p><h2 id=project-creation>Project creation</h2><table class="table table-striped table-bordered"><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>poetry new my-package</code></td><td>This creates a new project. This new project will contain a new <code>pyproject.toml</code> and <code>readme.md</code> files. It also sets up the folder structure for your Python package and your unit tests.</td></tr><tr><td><code>poetry new --src my-package</code></td><td>This also creates a new project but with the <code>src</code> project layout.</td></tr><tr><td><code>poetry init</code></td><td>This creates a new <code>pyproject.toml</code> file without creating an entire folder structure.</td></tr></tbody></table><h2 id=dependancy-management>Dependancy management</h2><table class="table table-striped table-bordered"><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>poetry install</code></td><td>This installs <strong>all</strong> the dependencies that are specified in the <code>poetry.lock</code> file. Thus, if you change your <code>pyproject.toml</code> but you do <strong>not</strong> update your <code>poetry.lock</code> file it will install the dependencies as specified in the (outdated) <code>poetry.lock</code> file. If there is no <code>poetry.lock</code> file, it will automatically first run the <code>poetry lock</code> command to create a <code>poetry.lock</code> file.</td></tr><tr><td><code>poetry install --no-dev</code></td><td>This only installs the main dependencies and does not install the development dependencies. Your dev dependencies are dependencies that you don&rsquo;t need to run the application such as <code>pytest</code>, <code>mypy</code>, etc. So, if you don&rsquo;t install them your final application will take up less space.</td></tr><tr><td><code>poetry install --remove-untracked</code></td><td>Removes all dependencies that are installed in your venv but are no longer specified in your <code>poetry.lock</code> file.</td></tr><tr><td><code>poetry install --extras "NAME_1 NAME_N</code></td><td>This installs the optional dependencies <code>NAME_1</code> and <code>NAME_N</code>.</td></tr><tr><td><code>poetry install --no-root</code></td><td>This installs your projects dependencies but doesn&rsquo;t install your package to the global name space in the venv. Thus, you can no longer directly import the package you made.</td></tr><tr><td><code>poetry update</code></td><td>Update <strong>all</strong> the dependencies in the <code>poetry.lock</code> file to their latest version.</td></tr><tr><td><code>poetry update NAME_1 NAME_2</code></td><td>Updates <strong>only</strong> <code>NAME_1</code> and <code>NAME_N</code> in the <code>poetry.lock</code> file to their latest version.</td></tr><tr><td><code>poetry add NAME_1 NAME_2</code></td><td>Adds <code>NAME_1</code> and <code>NAME_N</code> to the <code>poetry.lock</code> file and installs them into the venv. You can also add constrains like <code>@^2.0.5</code>, <code>>=2.0.5</code> or <code>&lt;=2.0.5</code>.</td></tr><tr><td><code>poetry add ../path/to/other/folder/with/pyproject.toml</code></td><td>Adds another poetry project as a <strong>local</strong> dependency. This is quite usefull for mono-repos.</td></tr><tr><td><code>poety remove NAME_1 NAME_2</code></td><td>Uninstalls dependency <code>NAME_1</code> and <code>NAME_N</code> from the VENV. Also removes them from the <code>poetry.lock</code> file.</td></tr><tr><td><code>poetry lock</code></td><td>If you have updated the dependencies in the <code>pyproject.toml</code> file manually, you can use this command to update the <code>poetry.lock</code> file.</td></tr><tr><td><code>poetry export -f requirements.txt --output requirements.txt</code></td><td>Export the lock file in the traditional <code>requirements.txt</code> file format.</td></tr></tbody></table><h2 id=virtual-environment>Virtual environment</h2><table class="table table-striped table-bordered"><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>poetry run CMD</code></td><td>Run a command inside the virtual environment without activating the VENV. For example, CMD can be <code>python main.py</code>, <code>black</code>, <code>pytest</code>, etc.</td></tr><tr><td><code>poetry shell</code></td><td>Activates the virtual environment. Similar to <code>conda activate name</code> or <code>source venv/bin/activate</code>.</td></tr><tr><td><code>poetry env use path/to/pythonN</code></td><td>Tell poetry to use the python version at <code>path/to/pythonN</code> as a basis for the VENV. You need this if you want to use a specific python version for VENV, e.g. <code>py3.9</code> or <code>py3.10</code>.</td></tr><tr><td><code>poetry env info --path</code></td><td>This gives the absolute path to the virtual environment. Useful if your IDEA needs a path to your python interpreter.</td></tr><tr><td><code>poetry env remove /full/path/to/python</code></td><td>This deletes the virtual environment.</td></tr><tr><td><code>poetry config virtualenvs.in-project true</code></td><td>Tell poetry to save the VENV dir in the same directory as the <code>pyproject.toml</code>.</td></tr></tbody></table><p>For a more complete overview I recommend you to read the <a href=https://python-poetry.org/docs/cli/>Poetry documentation</a>.</p></div><div class=after-post-tags><ul class=tags><li><a href=/tags/poetry>poetry</a></li><li><a href=/tags/python>python</a></li><li><a href=/tags/dependency-management>dependency management</a></li><li><a href=/tags/virtual-environment>virtual environment</a></li><li><a href=/tags/cli>CLI</a></li></ul></div><div class="row PageNavigation d-flex justify-content-between font-weight-bold"><div class=clearfix></div></div></div></div></div></div></div></div><footer class="footer mt-auto"><div class=container><div class=row><div class="col-md-12 col-sm-612 text-center">&copy; Copyright
Jordi Smit - All rights reserved</div></div></div></footer><script async src=https://jordismit.com/js/mediumish.min.f5bb3d8c672aaed326977e05f0187a6b8b165e033478c286160ebac554991ee1.js integrity="sha256-9bs9jGcqrtMml34F8Bh6a4sWXgM0eMKGFg66xVSZHuE="></script></body></html>